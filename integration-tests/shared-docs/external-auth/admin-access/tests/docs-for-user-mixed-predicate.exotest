operation: |
  fragment DocumentWithUser on Document {
    id
    content
    documentUsers {
      userId
      read
      write
    }
  }
  query @unordered {
    u1Docs: documents(where: {
      id: {lt: 10}, # Effectively true, but to test that we process mixed conditions correctly
      documentUsers: {and: [
        {userId: {eq: "u1"}},
        {read: {eq: true}}
      ]}}) {
      ...DocumentWithUser
    }
    u2Docs: documents(where: {
      id: {lt: 10},
      documentUsers: {and: [
        {userId: {eq: "u2"}},
        {read: {eq: true}}
      ]}}) {
      ...DocumentWithUser
    }    
  }
auth: |
  {
    "role": "admin"
  }
response: |
  {
    "data": {
      "u1Docs": [
        {
          "id": 1,
          "content": "d1",
          "documentUsers": [
            {
              "userId": "u1",
              "read": true,
              "write": true
            },
            {
              "userId": "u2",
              "read": false,
              "write": false
            }
          ]
        }
      ], 
      "u2Docs": [
        {
          "id": 2,
          "content": "d2",
          "documentUsers": [
            {
              "userId": "u1",
              "read": false,
              "write": false
            },
            {
              "userId": "u2",
              "read": true,
              "write": true
            }
          ]
        }
      ]
    }
  }
