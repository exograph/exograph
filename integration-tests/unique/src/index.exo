@postgres
module RsvpModule {
  @access(true)
  type Rsvp {
    @pk id: Int = autoIncrement()
    @unique("event_rsvp") event: String 
    @unique("event_rsvp")  user: User
    count: Int = 1
  }

  @access(true)
  type User {
    @pk id: Int = autoIncrement()
    @unique username: String 
    @unique("primary_email") primaryEmailId: String 
    @unique("secondary_email") secondaryEmailId: String? 
    @unique("primary_email", "secondary_email") emailDomain: String 

    rsvps: Set<Rsvp>?
  }
}