@postgres
service ConcertsService {
  @table("concerts")
  @access(true)
  type Concert {
    id: Int = autoincrement() @pk
    title: String
    concertArtists: Set<ConcertArtist> @column("concert_id")
    venue: Venue? @column("venue_id")
  }

  @table("concert_artists")
  @access(true)
  type ConcertArtist {
    id: Int = autoincrement() @pk
    concert: Concert @column("concert_id")
    artist: Artist @column("artist_id")
    rank: Int = 0
    role: String
  }

  @table("artists")
  @access(true)
  type Artist {
    id: Int = autoincrement() @pk
    name: String
    aristsConcerts: Set<ConcertArtist>? @column("artist_id") // An artist may yet to participate in a concert, hence optional
  }

  @access(true)
  type Venue {
    id: Int = autoincrement() @pk
    concerts: Set<Concert>? @column("venue_id")
  }
}