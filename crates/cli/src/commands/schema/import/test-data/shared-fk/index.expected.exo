@postgres
module Database {
  @access(query=true, mutation=false)
  type Member {
    @pk memberId: String
    @pk memberTenantId: String
    memberName: String?
    memberships: Set<Membership>?
  }

  @access(query=true, mutation=false)
  type Membership {
    @pk membershipId: String
    membershipName: String?
    @column(mapping={memberId: "membership_member_id", memberTenantId: "membership_tenant_id"}) member: Member?
    @column("membership_tenant_id") tenant: Tenant?
  }

  @access(query=true, mutation=false)
  type Tenant {
    @pk tenantId: String
    tenantName: String?
    memberships: Set<Membership>?
  }
}